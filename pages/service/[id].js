import {Container, Stack, Box, Heading, Text, Badge, Center, StackDivider} from "@chakra-ui/layout";
import {
    Button, Modal,
    ModalBody,
    ModalCloseButton,
    ModalContent, ModalFooter,
    ModalHeader,
    ModalOverlay, Select,
    useDisclosure, VStack
} from "@chakra-ui/react";

import {getAllServicesIds, getServiceData, getUzelData} from "../../lib/services";
import styles from "../../styles/Home.module.css";
import Head from "next/head";
import Header from "../../components/Header";
import Footer from "../../components/Footer";

export async function getStaticPaths() {
    const paths = await getAllServicesIds();
    return {
        paths,
        fallback: false
    }
}

export async function getStaticProps({ params }) {
    const serviceData = await getServiceData(params.id)
    const uzelData = await getUzelData(serviceData.data.uzelID)
    return {
        props: {
            service: serviceData.data,
            uzel: uzelData.data,
        }
    }
}

const Service = ({service, uzel}) => {
    const { isOpen, onOpen, onClose } = useDisclosure();


    return(
        <div className={styles.container}>
            <Head>
                <title>{service.name}</title>
                <meta name="description" content="Generated by create next app" />
                <link rel="icon" href="/favicon.ico" />
            </Head>

            <header>
                <Header/>
            </header>

            <main className={styles.main}>
                <Container maxW="container.lg" h={'90vh'}>
                    <Stack
                        direction={["column", "row"]}
                        spacing="24px"
                        h={'100%'}
                        divider={<StackDivider borderColor="gray.200" />}
                    >

                        <Center h={'100%'}>
                            <Box>
                                <>
                                    <Heading mb={'0.5rem'} textTransform={'capitalize'}>{service.name}</Heading>
                                    <Heading mb={'1rem'} size={'sm'}>{uzel.name}</Heading>
                                    <Text mb={'1rem'}>{service.description}</Text>
                                    <Text>Цена от: <Badge ml="1" colorScheme="green">{service.price} руб.</Badge></Text>
                                </>
                            </Box>
                        </Center>

                        <Center h={'100%'}>
                            <Button
                                onClick={() => {
                                    onOpen();
                                }}
                            >
                                Записаться
                            </Button>
                        </Center>
                    </Stack>

                    {/*<Modal isOpen={isOpen} onClose={onClose}>*/}
                    {/*    <ModalOverlay />*/}
                    {/*    <ModalContent>*/}
                    {/*        <ModalHeader>Запись на услугу</ModalHeader>*/}
                    {/*        <ModalCloseButton />*/}
                    {/*        <ModalBody>*/}
                    {/*            <VStack spacing={4}>*/}
                    {/*                <Select placeholder="Узел">*/}
                    {/*                    <option value="option1">Option 1</option>*/}
                    {/*                    <option value="option2">Option 2</option>*/}
                    {/*                    <option value="option3">Option 3</option>*/}
                    {/*                </Select>*/}
                    {/*                <Select placeholder="Услуга">*/}
                    {/*                    <option value="option1">Option 1</option>*/}
                    {/*                    <option value="option2">Option 2</option>*/}
                    {/*                    <option value="option3">Option 3</option>*/}
                    {/*                </Select>*/}
                    {/*                <Select placeholder="Марка авто">*/}
                    {/*                    <option value="option1">Option 1</option>*/}
                    {/*                    <option value="option2">Option 2</option>*/}
                    {/*                    <option value="option3">Option 3</option>*/}
                    {/*                </Select>*/}
                    {/*                <Select placeholder="Модель авто">*/}
                    {/*                    <option value="option1">Option 1</option>*/}
                    {/*                    <option value="option2">Option 2</option>*/}
                    {/*                    <option value="option3">Option 3</option>*/}
                    {/*                </Select>*/}
                    {/*                <Select placeholder="Год">*/}
                    {/*                    <option value="option1">Option 1</option>*/}
                    {/*                    <option value="option2">Option 2</option>*/}
                    {/*                    <option value="option3">Option 3</option>*/}
                    {/*                </Select>*/}
                    {/*                <Select placeholder="VIN">*/}
                    {/*                    <option value="option1">Option 1</option>*/}
                    {/*                    <option value="option2">Option 2</option>*/}
                    {/*                    <option value="option3">Option 3</option>*/}
                    {/*                </Select>*/}
                    {/*            </VStack>*/}
                    {/*        </ModalBody>*/}

                    {/*        <ModalFooter>*/}
                    {/*            <Button variant="ghost" onClick={onClose}>*/}
                    {/*                Закрыть*/}
                    {/*            </Button>*/}
                    {/*            <Button colorScheme="blue" mr={3}>Записаться</Button>*/}
                    {/*        </ModalFooter>*/}
                    {/*    </ModalContent>*/}
                    {/*</Modal>*/}
                </Container>
            </main>

            <footer className={styles.footer}>
                <Footer/>
            </footer>

        </div>
    )
}

export default Service